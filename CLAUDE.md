# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

MusnestFinance Frontend is a financial consultancy application built with TanStack Start, React 19, TypeScript, and shadcn/ui. Features include:
- Landing page with help center form for client inquiries
- Client/Admin authentication flows
- Client dashboard with financial metrics visualization

## Development Commands

This project uses **pnpm** as the package manager.

```bash
# Start development server on port 3000
pnpm dev

# Build for production
pnpm build

# Preview production build
pnpm preview

# Run tests (Vitest)
pnpm test

# Run a single test file
pnpm test src/path/to/file.test.ts

# Lint code
pnpm lint

# Format and fix code issues
pnpm check
```

## Architecture

### Routing System

The application uses **TanStack Router** with file-based routing:

- Routes are defined in `src/routes/` directory with nested folders for route groups
  - `/` - Landing page ([src/routes/index.tsx](src/routes/index.tsx))
  - `/login/client`, `/login/admin` - Authentication routes
  - `/dashboard/client`, `/dashboard/profile`, `/dashboard/our-nest` - Dashboard routes
- `__root.tsx` is the root layout component that wraps all routes
- `routeTree.gen.ts` is auto-generated by TanStack Router - never edit manually
- Each route file exports a `Route` using `createFileRoute()` or `createRootRoute()`

### State Management

- **TanStack Query** (React Query) for server state management
  - Configured in [src/lib/queryClient.ts](src/lib/queryClient.ts) with retry: 1 and refetchOnWindowFocus: false
  - QueryClientProvider wraps the app in `__root.tsx`

### HTTP Requests

- **Axios** instance configured in [src/lib/axios.ts](src/lib/axios.ts)
- Base URL comes from `VITE_API_URL` environment variable
- API endpoints are defined in [src/api/endpoints.ts](src/api/endpoints.ts)

### UI Components

- **shadcn/ui** components in `src/components/ui/`
- Configuration in [components.json](components.json) (New York style, Lucide icons)
- **Tailwind CSS v4** for styling
- Uses `class-variance-authority` and `tailwind-merge` via [src/lib/utils.ts](src/lib/utils.ts)
- **@unpic/react** for optimized responsive images (use `<Image>` from `@unpic/react`)

### Path Aliases

The project uses TypeScript path aliases configured in [tsconfig.json](tsconfig.json):
- `@/*` maps to `src/*`
- Import example: `import { Button } from '@/components/ui/button'`

## Key Files

- [src/router.tsx](src/router.tsx): Router configuration with `getRouter()` factory
- [src/routes/__root.tsx](src/routes/__root.tsx): Root layout with QueryClientProvider, devtools, and global styles
- [src/routes/index.tsx](src/routes/index.tsx): Landing page with hero, services, about, and help center form
- [src/routes/login/client.tsx](src/routes/login/client.tsx): Client authentication page
- [src/routes/dashboard/client.tsx](src/routes/dashboard/client.tsx): Client financial dashboard
- [src/api/endpoints.ts](src/api/endpoints.ts): API endpoint functions (sendHelpCenter, clientLogin)
- [src/lib/axios.ts](src/lib/axios.ts): Axios instance with base URL configuration
- [src/lib/queryClient.ts](src/lib/queryClient.ts): React Query client configuration
- [vite.config.ts](vite.config.ts): Vite configuration with TanStack Start, Nitro, and devtools plugins

## Environment Variables

Create a `.env` file with:
```
VITE_API_URL=<backend-api-url>
```

## Code Style

Prettier configuration ([prettier.config.js](prettier.config.js)):
- No semicolons
- Single quotes
- Trailing commas

ESLint uses TanStack's configuration ([eslint.config.js](eslint.config.js)).

## Adding New Features

### Adding a new route
1. Create a new file in `src/routes/` (e.g., `about.tsx`)
2. Use `createFileRoute()` to define the route
3. The route tree will auto-regenerate

### Adding a new API endpoint
1. Add the function to [src/api/endpoints.ts](src/api/endpoints.ts)
2. Use the `api` instance from `@/lib/axios`
3. Use with TanStack Query mutations or queries

### Adding shadcn/ui components
Use the shadcn CLI to add components (they'll be placed in `src/components/ui/`):
```bash
pnpm dlx shadcn@latest add <component-name>
```
